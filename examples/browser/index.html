<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<title>wkx - browser test</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<style>
		.examples th { vertical-align: top; }
		.examples td { vertical-align: top; max-width: 50%; overflow-x: auto; }
		.examples td > pre:only-child { margin: 0; }
		.examples td > i:first-child { vertical-align: top; }
		.examples td > div.header:first-child + pre:last-child,
		.examples td > i:first-child + pre:last-child { margin: 0; display: inline-block; vertical-align: top; }
		.examples td > .fluid.ui.accordion { padding-left: 1em; }
		.examples code.hljs, #functions code.hljs { background: transparent; padding: 0; font-size: 0.9em; }
		pre:last-child { margin-bottom: 0; }
		.pre { white-space: pre; }
		.ui.table > thead > tr > td { border-top: none; border-bottom: 1px solid #d4d4d5; }
		table.examples td.info.ui.message {
			display: table-cell; border-radius: 0; box-shadow: none; padding: 1em 1.5em; }
	</style>

	<!--[if lt IE 9]>
		<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
		<script>window.html5 || document.write('<script src="js/vendor/html5shiv.js"><\/script>')</script>
	<![endif]-->

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/github.min.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/languages/bash.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/languages/javascript.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/languages/xml.min.js"></script>

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/1.2.0/semantic.min.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/1.2.0/semantic.min.js"></script>

	<!--script src="../../dist/wkx.js"></script-->
	<script src="../../dist/wkx-debug.js"></script>
</head>

<body>
	<!--[if lt IE 7]>
		<p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
	<![endif]-->

	<div class="one column page ui grid"><div class="column">

		<h1 class="ui header">
			Using <a href="https://www.npmjs.com/package/wkx"><code>wkx</code></a> in the Browser
		</h1>

		<div class="ui segment">
			<p>To use <code>wkx</code> in a webpage, simply copy a built browser version from <code>dist/</code> into
				your project, and use a <code>script</code> tag to include it:</p>
			<pre><code class="html">&lt;script src=&quot;wkx.js&quot;&gt;&lt;/script&gt;</code></pre>

			<p>You may also use <a href="http://rawgit.com/">RawGit</a> as a CDN, so you don't need to copy
				<code>wkx</code> into your project:</p>
			<pre><code class="html">&lt;script src=&quot;https://cdn.rawgit.com/cschwarz/wkx/v0.0.4/dist/wkx.js&quot;&gt;&lt;/script&gt;</code></pre>

			<p>If you use <a href="http://browserify.org/">browserify</a> for your project, you can simply <code>npm
				install wkx --save</code>, and just require <code>wkx</code> as usual in
			your code.</p>

			<div class="ui divider"></div>

			<p>Regardless of which of the preceeding options you choose, using <code>wkx</code> in the browser will
				look the same:</p>
			<pre><code class="javascript">var wkx = require('wkx');</code></pre>
		</div>


		<h2 class="dividing ui header">Code Samples</h2>


		<h3 class="ui header">Rendering:</h3>

		<table class="examples small very compact two column ui table">
			<thead><tr><th colspan="2">WKT</th></tr></thead>
			<tbody>
				<tr><td><pre><code class="javascript">new wkx.Point(1, 2).toWkt()</code></pre></td></tr>
			</tbody>
		</table>

		<table class="examples small very compact two column ui table">
			<thead><tr><th colspan="2">WKB</th></tr></thead>
			<tbody>
				<tr><td><pre><code class="javascript">new wkx.Point(1, 2).toWkb()</code></pre></td></tr>
			</tbody>
		</table>

		<table class="examples small very compact two column ui table">
			<thead><tr><th colspan="2">PostGIS EWKB</th></tr></thead>
			<tbody>
				<tr><td><pre><code class="javascript">new wkx.Point(1, 2).toWkb({ postgis: true })</code></pre></td></tr>
				<tr><td><pre><code class="javascript">new wkx.Point(1, 2, 3).toWkb({ postgis: true })</code></pre></td></tr>
				<tr><td><pre><code class="javascript">new wkx.Point(1, 2, undefined, 4).toWkb({ postgis: true })</code></pre></td></tr>
			</tbody>
		</table>

		<table class="examples small very compact two column ui table">
			<thead><tr><th colspan="2">ISO/IEC 13249-3 (SQL/MM part 3) WKB</th></tr></thead>
			<tbody>
				<tr><td><pre><code class="javascript">new wkx.Point(1, 2).toWkb()</code></pre></td></tr>
				<tr><td><pre><code class="javascript">new wkx.Point(1, 2, 3).toWkb()</code></pre></td></tr>
				<tr><td><pre><code class="javascript">new wkx.Point(1, 2, undefined, 4).toWkb()</code></pre></td></tr>
			</tbody>
		</table>

		<table class="rendering-examples small very compact two column definition ui table">
			<thead>
				<tr>
					<th></th>
					<th>WKT</th>
					<th>PostGIS EWKT</th>
					<th>WKB</th>
					<th>PostGIS EWKB</th>
				</tr>
				<tr>
					<th></th>
					<th><code class="javascript">.toWkt()</code></th>
					<th><code class="javascript">.toWkt({ postgis: true })</code></th>
					<th><code class="javascript">.toWkb().toString('hex')</code></th>
					<th><code class="javascript">.toWkb({ postgis: true }).toString('hex')</code></th>
				</tr>
			</thead>
			<tbody>
				<tr><td><pre><code class="javascript">new wkx.Point(1, 2)</code></pre></td></tr>
				<tr><td><pre><code class="javascript">new wkx.Point(1, 2, 3)</code></pre></td></tr>
				<tr><td><pre><code class="javascript">new wkx.Point(1, 2, undefined, 4)</code></pre></td></tr>
			</tbody>
		</table>


		<h3 class="ui header">Parsing:</h3>

		<table class="examples small very compact two column ui table">
			<thead><tr><th colspan="2">WKT</th></tr></thead>
			<tbody>
				<tr><td><pre><code class="javascript">wkx.Geometry.parse(
	'POINT (30 10)'
)</code></pre></td></tr>
				<tr><td><pre><code class="javascript">wkx.Geometry.parse(
	'LINESTRING (30 10, 10 30, 40 40)'
)</code></pre></td></tr>
				<tr><td><pre><code class="javascript">wkx.Geometry.parse(
	'POLYGON ((30 10, 40 40, 20 40, 10 20, 30 10))'
)</code></pre></td></tr>
				<tr><td><pre><code class="javascript">wkx.Geometry.parse(
	'POLYGON ((35 10, 45 45, 15 40, 10 20, 35 10),' +
		'(20 30, 35 35, 30 20, 20 30))'
)</code></pre></td></tr>
<!-- FIXME: According to Wikipedia (http://en.wikipedia.org/wiki/Well-known_text#Geometric_objects),
	this is a valid format for MULTIPOINT geometries; however, this breaks in `wkx`:
				<tr><td><pre><code class="javascript">wkx.Geometry.parse(
	'MULTIPOINT ((10 40), (40 30), (20 20), (30 10))'
)</code></pre></td></tr>
-->
				<tr><td><pre><code class="javascript">wkx.Geometry.parse(
	'MULTIPOINT (10 40, 40 30, 20 20, 30 10)'
)</code></pre></td></tr>
				<tr><td><pre><code class="javascript">wkx.Geometry.parse(
	'MULTILINESTRING ((10 10, 20 20, 10 40),' +
		'(40 40, 30 30, 40 20, 30 10))'
)</code></pre></td></tr>
				<tr><td><pre><code class="javascript">wkx.Geometry.parse(
	'MULTIPOLYGON (((30 20, 45 40, 10 40, 30 20)),' +
		'((15 5, 40 10, 10 20, 5 10, 15 5)))'
)</code></pre></td></tr>
				<tr><td><pre><code class="javascript">wkx.Geometry.parse(
	'MULTIPOLYGON (((40 40, 20 45, 45 30, 40 40)),' +
		'((20 35, 10 30, 10 10, 30 5, 45 20, 20 35),' +
			'(30 20, 20 15, 20 25, 30 20)))'
)</code></pre></td></tr>
			</tbody>
		</table>

		<table class="examples small very compact two column ui table">
			<thead><tr><th colspan="2">PostGIS EWKT</th></tr></thead>
			<tbody>
				<tr><td><pre><code class="javascript">wkx.Geometry.parse(
	'SRID=4326; POINT (2 4)'
)</code></pre></td></tr>
				<tr><td><pre><code class="javascript">wkx.Geometry.parse(
	'POINTM (2 4 6)'
)</code></pre></td></tr>
				<tr><td><pre><code class="javascript">wkx.Geometry.parse(
	'POINT (2 4 8)'
)</code></pre></td></tr>
				<tr><td><pre><code class="javascript">wkx.Geometry.parse(
	'POINT (2 4 6 8)'
)</code></pre></td></tr>
				<tr><td><pre><code class="javascript">wkx.Geometry.parse(
	'SRID=4326; MULTIPOINTM (0 0 0, 1 2 1)'
)</code></pre></td></tr>
				<tr><td><pre><code class="javascript">wkx.Geometry.parse(
	'MULTILINESTRING ((0 0 0, 1 1 0, 1 2 1),' +
		'(2 3 1, 3 2 1, 5 4 1))'
)</code></pre></td></tr>
				<tr><td><pre><code class="javascript">wkx.Geometry.parse(
	'POLYGON ((0 0 0, 4 0 0, 4 4 0, 0 4 0, 0 0 0),' +
		'(1 1 0, 2 1 0, 2 2 0, 1 2 0, 1 1 0))'
)</code></pre></td></tr>
				<tr><td><pre><code class="javascript">wkx.Geometry.parse(
	'MULTIPOLYGON (((0 0 0, 4 0 0, 4 4 0, 0 4 0, 0 0 0),' +
			'(1 1 0, 2 1 0, 2 2 0, 1 2 0, 1 1 0)),' +
		'((-1 -1 0, -1 -2 0, -2 -2 0, -2 -1 0, -1 -1 0)))'
)</code></pre></td></tr>
				<tr><td><pre><code class="javascript">wkx.Geometry.parse(
	'GEOMETRYCOLLECTIONM (' +
		'POINTM (2 3 9),' +
		'LINESTRINGM (2 3 4, 3 4 5))'
)</code></pre></td></tr>
			</tbody>
		</table>

		<table class="examples small very compact two column ui table">
			<thead><tr><th colspan="2">PostGIS EWKT</th></tr></thead>
			<tbody>
				<tr><td><pre><code class="javascript">wkx.Geometry.parse(
	'POINT M (2 4 6)'
)</code></pre></td></tr>
				<tr><td><pre><code class="javascript">wkx.Geometry.parse(
	'POINT Z (2 4 8)'
)</code></pre></td></tr>
				<tr><td><pre><code class="javascript">wkx.Geometry.parse(
	'POINT ZM (2 4 6 8)'
)</code></pre></td></tr>
				<tr><td><pre><code class="javascript">wkx.Geometry.parse(
	'MULTIPOINT M (0 0 0, 1 2 1)'
)</code></pre></td></tr>
				<tr><td><pre><code class="javascript">wkx.Geometry.parse(
	'MULTILINESTRING Z ((0 0 0, 1 1 0, 1 2 1),' +
		'(2 3 1, 3 2 1, 5 4 1))'
)</code></pre></td></tr>
				<tr><td><pre><code class="javascript">wkx.Geometry.parse(
	'POLYGON Z ((0 0 0, 4 0 0, 4 4 0, 0 4 0, 0 0 0),' +
		'(1 1 0, 2 1 0, 2 2 0, 1 2 0, 1 1 0))'
)</code></pre></td></tr>
				<tr><td><pre><code class="javascript">wkx.Geometry.parse(
	'MULTIPOLYGON Z (((0 0 0, 4 0 0, 4 4 0, 0 4 0, 0 0 0),' +
			'(1 1 0, 2 1 0, 2 2 0, 1 2 0, 1 1 0)),' +
		'((-1 -1 0, -1 -2 0, -2 -2 0, -2 -1 0, -1 -1 0)))'
)</code></pre></td></tr>
				<tr><td><pre><code class="javascript">wkx.Geometry.parse(
	'GEOMETRYCOLLECTION M (' +
		'POINT M (2 3 9),' +
		'LINESTRING M (2 3 4, 3 4 5))'
)</code></pre></td></tr>
			</tbody>
		</table>

		<table class="examples small very compact two column ui table">
			<thead><tr><th colspan="2">WKB</th></tr></thead>
			<tbody>
				<tr><td><pre><code class="javascript">wkx.Geometry.parse(bufferFromHex(
    '01' +                      // Little Endian
	'01 00 00 00' +             // Type: POINT
	'00 00 00 C0 A0 76 59 C0' + // X
	'B0 91 00 46 78 C8 40 40'   // Y
))</code></pre></td></tr>
			</tbody>
		</table>

		<table class="examples small very compact two column ui table">
			<thead>
				<tr><th colspan="2">PostGIS EWKB</th></tr>
				<tr><td colspan="2" class="icon info ui message">
					<i class="info circle ui icon"></i>
					<div class="content">
						<p>The PostGIS EWKB format adds three flag bits to the geometry type field of WKB, which may be
							bitwise <code>OR</code>'ed with any base WKB type code:</p>
						<ul class="list">
							<li><code>0x20000000</code> &#x2014;
								Includes SRID</li>
							<li><code>0x40000000</code> &#x2014;
								Includes M (measurement) coordinate</li>
							<li><code>0x80000000</code> &#x2014;
								Includes Z coordinate</li>
						</ul>

						<div class="ui divider"></div>
						<div class="small ui header">See also:</div>
						<ul class="list">
							<li><a href="https://github.com/postgis/postgis/blob/2.1.0/doc/ZMSgeoms.txt">PostGIS source
								code: <code>doc/ZMSgeoms.txt</code></a> &#x2014; defines the EWKB type code flags, as
								well as the full set of EWKB geometry type codes including separate "Z", "M", and "S"
								variants (and combinations thereof)</li>
						</ul>
					</div>
				</td></tr>
			</thead>
			<tbody>
				<tr><td><pre><code class="javascript">wkx.Geometry.parse(bufferFromHex(
    '00' +                      // Big Endian
	'00 00 00 01' +             // Type: POINT
	'40 00 00 00 00 00 00 00' + // X
	'40 10 00 00 00 00 00 00'   // Y
))</code></pre></td></tr>
				<tr><td><pre><code class="javascript">wkx.Geometry.parse(bufferFromHex(
    '00' +                      // Big Endian
	'20 00 00 01' +             // Type: POINT + SRID
	'00 00 0F 11' +             // SRID
	'40 00 00 00 00 00 00 00' + // X
	'40 10 00 00 00 00 00 00'   // Y
))</code></pre></td></tr>
				<tr><td><pre><code class="javascript">wkx.Geometry.parse(bufferFromHex(
    '00' +                      // Big Endian
	'60 00 00 01' +             // Type: POINT + SRID, M
	'00 00 0F 11' +             // SRID
	'40 00 00 00 00 00 00 00' + // X
	'40 10 00 00 00 00 00 00' + // Y
	'40 18 00 00 00 00 00 00'   // M
))</code></pre></td></tr>
				<tr><td><pre><code class="javascript">wkx.Geometry.parse(bufferFromHex(
    '00' +                      // Big Endian
	'A0 00 00 01' +             // Type: POINT + SRID, Z
	'00 00 0F 11' +             // SRID
	'40 00 00 00 00 00 00 00' + // X
	'40 10 00 00 00 00 00 00' + // Y
	'40 20 00 00 00 00 00 00'   // Z
))</code></pre></td></tr>
				<tr><td><pre><code class="javascript">wkx.Geometry.parse(bufferFromHex(
    '00' +                      // Big Endian
	'E0 00 00 01' +             // Type: POINT + SRID, M, Z
	'00 00 0F 11' +             // SRID
	'40 00 00 00 00 00 00 00' + // X
	'40 10 00 00 00 00 00 00' + // Y
	'40 18 00 00 00 00 00 00' + // M
	'40 20 00 00 00 00 00 00'   // Z
))</code></pre></td></tr>
				<tr><td><pre><code class="javascript">wkx.Geometry.parse(bufferFromHex(
    '00' +                      // Big Endian
	'40 00 00 01' +             // Type: POINT + M
	'40 00 00 00 00 00 00 00' + // X
	'40 10 00 00 00 00 00 00' + // Y
	'40 18 00 00 00 00 00 00'   // M
))</code></pre></td></tr>
				<tr><td><pre><code class="javascript">wkx.Geometry.parse(bufferFromHex(
    '00' +                      // Big Endian
	'80 00 00 01' +             // Type: POINT + Z
	'40 00 00 00 00 00 00 00' + // X
	'40 10 00 00 00 00 00 00' + // Y
	'40 20 00 00 00 00 00 00'   // Z
))</code></pre></td></tr>
				<tr><td><pre><code class="javascript">wkx.Geometry.parse(bufferFromHex(
    '00' +                      // Big Endian
	'C0 00 00 01' +             // Type: POINT + M, Z
	'40 00 00 00 00 00 00 00' + // X
	'40 10 00 00 00 00 00 00' + // Y
	'40 18 00 00 00 00 00 00' + // M
	'40 20 00 00 00 00 00 00'   // Z
))</code></pre></td></tr>
			</tbody>
		</table>

		<table class="examples small very compact two column ui table">
			<thead>
				<tr><th colspan="2">ISO/IEC 13249-3 (SQL/MM part 3) WKB</th></tr>
				<tr><td colspan="2" class="icon info ui message">
					<i class="info circle ui icon"></i>
					<div class="content">
						<p>The variant of the WKB format defined in ISO/IEC 13249-3: SQL/MM part 3 includes an extended
							set of geometry type codes, including separate "Z", "M", and "ZM" variants. ISO/IEC 13249-3
							is not a freely-available standard, but the OGC
							<a href="http://www.opengeospatial.org/standards/sfs">Simple Feature Access - Part 2: SQL
							Option</a> ("SFSQL") standard also defines the same geometry types. The new type variants
							are formed by adding one of three integer offsets (which don't line up to byte boundaries)
							to the geometry type codes from standard WKB:</p>
						<ul class="list">
							<li><code>0x000003E8</code> <em>(decimal <code>1000</code>)</em> &#x2014;
								Includes Z coordinate</li>
							<li><code>0x000007D0</code> <em>(decimal <code>2000</code>)</em> &#x2014;
								Includes M (measurement) coordinate</li>
							<li><code>0x00000BB8</code> <em>(decimal <code>3000</code>)</em> &#x2014;
								Includes both Z and M (measurement) coordinates</li>
						</ul>

						<div class="ui divider"></div>
						<div class="small ui header">See also:</div>
						<ul class="list">
							<li><a href="http://www.opengeospatial.org/standards/sfs">Simple Feature Access - Part 2:
								SQL Option version 1.2.1</a> section 7.1.3.3: Field description &#x2014; defines the
								full set of geometry type codes, including separate "Z", "M", and "ZM" variants</li>
						</ul>
					</div>
				</td></tr>
			</thead>
			<tbody>
				<tr><td><pre><code class="javascript">wkx.Geometry.parse(bufferFromHex(
    '00' +                      // Big Endian
	'00 00 00 01' +             // Type: POINT
	'40 00 00 00 00 00 00 00' + // X
	'40 10 00 00 00 00 00 00'   // Y
))</code></pre></td></tr>
				<tr><td><pre><code class="javascript">wkx.Geometry.parse(bufferFromHex(
    '00' +                      // Big Endian
	'00 00 03 E9' +             // Type: POINT + Z
	'40 00 00 00 00 00 00 00' + // X
	'40 10 00 00 00 00 00 00' + // Y
	'40 20 00 00 00 00 00 00'   // Z
))</code></pre></td></tr>
				<tr><td><pre><code class="javascript">wkx.Geometry.parse(bufferFromHex(
    '00' +                      // Big Endian
	'00 00 07 D1' +             // Type: POINT + M
	'40 00 00 00 00 00 00 00' + // X
	'40 10 00 00 00 00 00 00' + // Y
	'40 18 00 00 00 00 00 00'   // M
))</code></pre></td></tr>
				<tr><td><pre><code class="javascript">wkx.Geometry.parse(bufferFromHex(
    '00' +                      // Big Endian
	'00 00 0B B9' +             // Type: POINT + Z, M
	'40 00 00 00 00 00 00 00' + // X
	'40 10 00 00 00 00 00 00' + // Y
	'40 18 00 00 00 00 00 00' + // M
	'40 20 00 00 00 00 00 00'   // Z
))</code></pre></td></tr>
			</tbody>
		</table>

		<h5 class="top attached ui header">Helper functions used above:</h5>
		<pre id="functions" class="bottom attached ui segment"><code class="javascript"></code></pre>

	</div></div>

	<script>
var Buffer = require('buffer').Buffer;
//var BinaryReader = require('binaryreader');
var wkx = require('wkx');

$('#functions code').text(bufferFromHex.toString());

function makeResultNode(result) {
	var resultNode = $('<td><i class="long arrow right icon"></i><pre><code class="json"></code></pre></td>');

	resultNode.find('pre > code')
		.text(
			JSON.stringify(result, null, '  ')
				.replace(/\{\s*\n\s*("x":\s*\d+,)\s*\n\s*("y":\s*\d+)\s*\n\s*\}/g, function(match, xGroup, yGroup) {
					return ['{', xGroup, yGroup, '}'].join(' ');
				})
				.replace(/^(?:\s*\d+,\s*\n\s*){1,16}/gm, function(match) {
					return match.replace(/\s*\n\s*/g, ' ');
				})
		);

	resultNode.appendTo($this);
}

$('.rendering-examples > tbody > tr')
	.each(function() {
		var $this = $(this);
		var exampleCode = $('td:first-child > pre > code', this);

		if(exampleCode.length === 0) {
			return;
		}

		var result;

		try {
			// Build a function to execute the example code.
			var exampleFunc = new Function('bufferFromHex', 'wkx', 'return ' + exampleCode.text());

			// Run the example code.
			result = exampleFunc(bufferFromHex, wkx);
		} catch(exc) {
			console.error("Error running example:", exc);

			$this.addClass('error');

			makeResultNode(exc);
			function makeResultNode(exc) {
				var errorNode = $('<td></td>')
					.appendTo(this);

				var errorLines = (exc.stack || exc.toString()).split(/\r\n?|\n/g);

				$('<div class="small red ui header"></div>')
					.text(errorLines.shift())
					.prepend('<i class="attention icon"></i>')
					.appendTo(errorNode);

				if(errorLines.length > 0)
				{
					$('<div class="fluid ui accordion"></div>')
						.append('<div class="title"><i class="dropdown icon"></i> Stack</div>')
						.append(
							$('<pre class="content"></pre>')
								.append($('<code></code>').text(errorLines.join('\n')))
						)
						.appendTo(errorNode);
				}
			}

			return;
		}

		try {
			// Build a function to execute the example code.
			var exampleFunc = new Function('bufferFromHex', 'wkx', 'return ' + exampleCode.text());

			// Run the example code.
			result = exampleFunc(bufferFromHex, wkx);
		} catch(exc) {
			makeResultNode(result);
		}

		$this.addClass('positive');
	});

$('.examples > tbody > tr')
	.each(function() {
		var $this = $(this);
		var exampleCode = $('td:first-child > pre > code', this);

		if(exampleCode.length === 0) {
			return;
		}

		try {
			// Build a function to execute the example code.
			var exampleFunc = new Function('bufferFromHex', 'wkx', 'return ' + exampleCode.text());

			// Run the example code.
			var result = exampleFunc(bufferFromHex, wkx);

			var resultNode = $('<td><i class="long arrow right icon"></i><pre><code class="json"></code></pre></td>');

			resultNode.find('pre > code')
				.text(
					JSON.stringify(result, null, '  ')
						.replace(/\{\s*\n\s*("x":\s*\d+,)\s*\n\s*("y":\s*\d+)\s*\n\s*\}/g, function(match, xGroup, yGroup) {
							return ['{', xGroup, yGroup, '}'].join(' ');
						})
						.replace(/^(?:\s*\d+,\s*\n\s*){1,16}/gm, function(match) {
							return match.replace(/\s*\n\s*/g, ' ');
						})
				);

			$this
				.addClass('positive')
				.append(resultNode);
		} catch(exc) {
			console.error("Error running example:", exc);

			$this.addClass('error');

			var errorNode = $('<td></td>')
				.appendTo(this);

			var errorLines = (exc.stack || exc.toString()).split(/\r\n?|\n/g);

			$('<div class="small red ui header"></div>')
				.text(errorLines.shift())
				.prepend('<i class="attention icon"></i>')
				.appendTo(errorNode);

			if(errorLines.length > 0)
			{
				$('<div class="fluid ui accordion"></div>')
					.append('<div class="title"><i class="dropdown icon"></i> Stack</div>')
					.append(
						$('<pre class="content"></pre>')
							.append($('<code></code>').text(errorLines.join('\n')))
					)
					.appendTo(errorNode);
			}
		}
	});

// Highlight all existing code blocks.
hljs.configure({ tabReplace: '    ' });
hljs.initHighlightingOnLoad();

// Initialize accordions.
$('.ui.accordion').accordion();

function bufferFromHex(hexData) {
	hexData = hexData.replace(/\s+/g, '');
	var ewkb = [];
	for(var idx = 0; idx < hexData.length; idx += 2) {
		ewkb.push(parseInt(hexData.slice(idx, idx + 2), 16));
	}
	return new Buffer(ewkb);
}
	</script>

</body>
</html>
